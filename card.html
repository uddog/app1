<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Card</title>
    <link rel="stylesheet" href="universal.css" />
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      #roll {
        font-family: "font1";
        font-size: 0.9rem;
      }
      body {
        transition: background-image 0.5s ease-in-out;
        background-size: cover;
        background-position: center;
        background-color: #010408;
      }
      .container {
        position: relative;
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-family: sans-serif;
      }
      .card {
        position: relative;
        z-index: 2;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-end;
        width: 80vw;
        text-align: center;
        height: 70vh;
        box-sizing: border-box;
        text-decoration: none;
        perspective: 700px;
      }
      .main {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        height: 100%;
        padding: 32px;
        box-sizing: border-box;
        border-radius: 24px;
        backdrop-filter: blur(6px);
        border: solid 2px rgba(255, 255, 255, 0.655);
        background-color: rgba(255, 255, 255, 0.084);
        transition: all ease 0.7s;
        color: #fff;
      }

      .icon {
        position: relative;
        z-index: 10;
        margin-bottom: 20px;
        border-radius: 50%;
        overflow: hidden;
        display: grid;
        place-items: center;
        transition: all ease 1s;
      }
      img {
        width: 35vw;
        height: 35vw;
        object-fit: cover;
        object-position: center;
      }
      .tails > p {
        border-bottom: 1px solid;
        padding-bottom: 3px;
      }
      .adblod {
        margin: 10px;
        width: 60vw;
        display: flex;
        justify-content: center;
      }
      .adblod p {
        width: 50%;
        margin: 2px;
        text-align: center;
      }

      /*end*/
      .touch {
        position: absolute;
        z-index: 2;
        width: 33.3333%;
        height: 33.3333%;
        box-sizing: border-box;
      }
      .touch__1 {
        top: 0;
        left: 0;
      }
      .touch__2 {
        top: 0;
        left: 0;
        right: 0;
        margin: 0 auto;
      }
      .touch__3 {
        top: 0;
        right: 0;
      }
      .touch__4 {
        top: 33.3333%;
        left: 0;
      }
      .touch__6 {
        top: 33.3333%;
        right: 0;
      }
      .touch__7 {
        bottom: 0;
        left: 0;
      }
      .touch__8 {
        bottom: 0;
        left: 0;
        right: 0;
        margin: 0 auto;
      }
      .touch__9 {
        bottom: 0;
        right: 0;
      }
      .touch__1:hover ~ .main {
        transform: rotateX(20deg) rotateY(-20deg) rotateZ(10deg);
      }
      .touch__1:hover ~ .main .icon {
        transform: translateX(-20px) translateY(-10px) translateZ(60px);
        box-shadow: 0 20px 24px rgba(183, 173, 173, 0.2);
      }
      .touch__2:hover ~ .main {
        transform: rotateX(20deg) rotateY(0) rotateZ(0);
      }
      .touch__2:hover ~ .main .icon {
        transform: translateX(0) translateY(-10px) translateZ(60px);
        box-shadow: 0 20px 24px rgba(183, 173, 173, 0.2);
      }
      .touch__3:hover ~ .main {
        transform: rotateX(20deg) rotateY(20deg) rotateZ(-10deg);
      }
      .touch__3:hover ~ .main .icon {
        transform: translateX(20px) translateY(-10px) translateZ(60px);
        box-shadow: 0 20px 24px rgba(183, 173, 173, 0.2);
      }
      .touch__4:hover ~ .main {
        transform: rotateX(0) rotateY(-40deg) rotateZ(0);
      }
      .touch__6:hover ~ .main {
        transform: rotateX(0) rotateY(40deg) rotateZ(0);
      }
      .touch__7:hover ~ .main {
        transform: rotateX(-20deg) rotateY(-20deg) rotateZ(-10deg);
      }
      .touch__7:hover ~ .main .text {
        transform: translateX(-20px) translateY(10px) translateZ(60px);
        box-shadow: 20px -20px 24px rgba(0, 0, 0, 0.2);
      }
      .touch__8:hover ~ .main {
        transform: rotateX(-20deg) rotateY(0) rotateZ(0);
      }
      .touch__8:hover ~ .main .text {
        transform: translateX(0) translateY(10px) translateZ(60px);
        box-shadow: 0 -20px 24px rgba(0, 0, 0, 0.2);
      }
      .touch__9:hover ~ .main {
        transform: rotateX(-20deg) rotateY(20deg) rotateZ(10deg);
      }
      .touch__9:hover ~ .main .text {
        transform: translateX(20px) translateY(10px) translateZ(60px);
        box-shadow: -20px -20px 24px rgba(0, 0, 0, 0.2);
      }

      #bottomArea {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 10vh;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <p></p>
    <div class="container">
      <a href="#" class="card">
        <div class="touch touch__1"></div>
        <div class="touch touch__2"></div>
        <div class="touch touch__3"></div>
        <div class="touch touch__4"></div>
        <div class="touch touch__6"></div>
        <div class="touch touch__7"></div>
        <div class="touch touch__8"></div>
        <div class="touch touch__9"></div>
      </a>
    </div>

    <div id="bottomArea"></div>

    <script src="universal.js"></script>

    <script>
      const img = localStorage.getItem("userImg");
      const name = localStorage.getItem("userName");
      const address = localStorage.getItem("userAddress");
      const blood = localStorage.getItem("userBloodGroup");
      const point = localStorage.getItem("userPoint");
      const role = localStorage.getItem("userRole");

      document.addEventListener("DOMContentLoaded", function () {
        const mainHTML = `
        <div class="main">
          <div class="icon">
            <img src="${img}">
          </div>
        <div class="tails">
          <div class="adblod">
            <p>${name}</p>
            <p id="roll">${role}</p>
          </div>
          <div class="adblod">
              <p>Uddog Point</p>
              <p>${point}</p>
          </div>
          <div class="adblod">
            <p>${address}</p>
            <p>${blood}</p>
          </div>
          <p>
            



        </div>
      </div>
      `;

        const cardLink = document.querySelector(".card");
        cardLink.innerHTML += mainHTML;
      });

      //background img

      let currentIndex = 0;
      let touchStartX = 0;
      let touchEndX = 0;

      function nextBackground() {
        changeBackground(1); // Passing 1 as argument to indicate next image
      }

      function prevBackground() {
        changeBackground(-1); // Passing -1 as argument to indicate previous image
      }

      function changeBackground(direction) {
        // CSV link to your spreadsheet (replace with your own link)
        const csvLink =
          "https://docs.google.com/spreadsheets/d/e/2PACX-1vT5yPBQL7OkwisJJ6Dq4jpzATrchx3wbyxQQ09mH0BoPrTFr8FYnKxkT7xjvWB8P51Gled65w6S8VQH/pub?output=csv&gid=366259374";

        // Fetch the CSV data
        fetch(csvLink)
          .then((response) => response.text())
          .then((csvData) => {
            // Convert CSV data to an array of image URLs
            const rows = csvData.split("\n");
            const imgUrls = rows.slice(1).map((row) => row.split(",")[0]); // Skip the first row

            // Update currentIndex based on direction
            currentIndex =
              (currentIndex + direction + imgUrls.length) % imgUrls.length;

            // Check if the current row is empty
            while (imgUrls[currentIndex].trim() === "") {
              // If empty, move to the next row
              currentIndex = (currentIndex + 1) % imgUrls.length;
            }

            // Set the background image
            document.body.style.backgroundImage = `url(${imgUrls[currentIndex]})`;
          })
          .catch((error) => console.error("Error fetching CSV data:", error));
      }

      // Swipe functionality for touch devices
      document.addEventListener("touchstart", function (event) {
        touchStartX = event.touches[0].clientX;
      });

      document.addEventListener("touchend", function (event) {
        touchEndX = event.changedTouches[0].clientX;
        handleSwipe();
      });

      function handleSwipe() {
        const swipeThreshold = 50; // Adjust the threshold as needed
        const swipeLength = touchEndX - touchStartX;

        if (swipeLength > swipeThreshold) {
          // Swipe right
          prevBackground();
        } else if (swipeLength < -swipeThreshold) {
          // Swipe left
          nextBackground();
        }
      }
    </script>
  </body>
</html>
